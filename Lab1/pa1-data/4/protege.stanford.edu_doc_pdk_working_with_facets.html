working with facets working with facets the following code shows how to work with facets programmatically it shows how to access both system and user defined facets and how to do overrides package test import java util import edu stanford smi protege model import edu stanford smi protege util this example shows how to work with system and user defined facets programmatically author ray fergerson fergerson smi stanford edu public class facetsexample public static void main string args collection errors new arraylist project project project createnewproject null errors dumperrors errors knowledgebase kb project getknowledgebase playwithsystemfacet kb playwithuserdefinedfacet kb system out println done private static void dumperrors collection errors if errors isempty iterator i errors iterator while i hasnext object o i next system out println error o system exit 1 private static void playwithsystemfacet knowledgebase kb collection rootclses kb getrootclses cls cls kb createcls null rootclses slot slot kb createslot null slot setvaluetype valuetype integer facet numericminimumfacet kb getfacet model facet numeric_minimum asserttrue numericminimumfacet null slot associatedslot numericminimumfacet getassociatedslot playwithfacet cls slot numericminimumfacet associatedslot same stuff as above but with a user defined facet in order to get a user defined facet we first have to define a metaslot and add a template slot to it this template slot becomes the associated class for the facet which the system creates for us private static void playwithuserdefinedfacet knowledgebase kb cls defaultmetaslot kb getdefaultslotmetacls collection parents collectionutilities createcollection defaultmetaslot cls myslotmetaslot kb createcls null parents slot slotassociatedwithfacet kb createslot null myslotmetaslot adddirecttemplateslot slotassociatedwithfacet facet myfacet kb createfacet null slotassociatedwithfacet setassociatedfacet myfacet collection rootclses kb getrootclses cls cls kb createcls null rootclses slot slot kb createslot null myslotmetaslot an instance of the new metaslot slot setvaluetype valuetype integer playwithfacet cls slot myfacet slotassociatedwithfacet private static void playwithfacet cls cls slot slot facet facet slot associatedslot set the numeric minimum on the slot this is the top level facet value integer toplevelvalueset new integer 3 slot setownslotvalue associatedslot toplevelvalueset cls adddirecttemplateslot slot now the facet value at the class the real facet value equal to the top level value object facetvalue cls gettemplatefacetvalue slot facet asserttrue facetvalue equals toplevelvalueset now set the facet at the class integer facetatclassvalueset new integer 5 cls settemplatefacetvalue slot facet facetatclassvalueset object facetatclassvalue cls gettemplatefacetvalue slot facet asserttrue facetatclassvalue equals facetatclassvalueset private static void asserttrue boolean b if b system err println assert failed new throwable printstacktrace system exit 1
