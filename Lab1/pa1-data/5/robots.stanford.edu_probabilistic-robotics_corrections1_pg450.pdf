13 the fastslam algorithm 1 algorithm fastslam 1.0 _known_correspondence zt ct ut yt 1 2 for k 1 to m do loop over page 1 450 13 the fastslam algorithm 1 algorithm fastslam 1.0 _known_correspondence zt ct ut yt 1 2 for k 1 to m do loop over all particles 3 retrieve x k t 1  k 1 t 1  k 1 t 1  k n t 1  k n t 1 from yt 1 4 x k t p xt x k t 1 ut sample pose 5 j ct observed feature 6 if feature j never seen before 7  k j t h 1 zt x k t initialize mean 8 h h x k t  k j t calculate jacobian 9  k j t h 1 qt h 1 t initialize covariance 10 w k p0 default importance weight 11 else 12 z h  k j t 1 x k t measurement prediction 13 h h x k t  k j t 1 calculate jacobian 14 q h  k j t 1 ht qt measurement covariance 15 k  k j t 1 ht q 1 calculate kalman gain 16  k j t  k j t 1 k zt z update mean 17  k j t i kh  k j t 1 update covariance 18 w k 2q 1 2 exp 1 2 zt zn t q 1 zt zn importance factor 19 endif 20 for all other features j j do unobserved features 21  k j t  k j t 1 leave unchanged 22  k j t  k j t 1 23 endfor 24 endfor 25 yt initialize new particle set 26 do m times resample m particles 27 draw random k with probability w k resample 28 add x k t  k 1 t  k 1 t  k n  k n to yt 29 endfor 30 return yt table 13.1 fastslam 1.0 with known correspondence
