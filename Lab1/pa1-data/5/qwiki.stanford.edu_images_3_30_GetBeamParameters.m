function q0 w0 zr z getbeamparameters w1 w2 x lambda mode function q0 w0 zr z getbeamparameters w1 w2 x lambda mode return the beam parameters reduntantly including the q parameter q_0 the distance from the focus to the first waist measurement w1 z the beam waist w0 and the raleigh range zr the code makes the assumption that the waist is not between the two measurement z 0 implies that the waist lies closer to w1 z 0 closer to w2 the function takes arguments w1 beam waist measurement 1 w2 beam waist measurement 2 x the separation between the two measurement lambda the laser wavelength mode 1 waist between measurements 0 waist outside measurements no mode argument defaults to mode 0 if nargin 4 mode 0 end define these to clean up the notation delta w2 2 w1 2 lp lambda pi define the coefficients of z in the quadratic equation in standard form a delta lp 2 4 x 2 delta b lp 2 4 x 3 delta 2 x w1 2 c lp 2 x 4 delta x w1 2 solve the quadratic formula this root corresponds to a waist between the measurements z1 b sqrt b 2 4 a c 2 a this root corresponts to a waist outside the measurements z2 b sqrt b 2 4 a c 2 a if b 2 4 a c 0 z1 0 z2 0 fprintf no solution exists for this combination of measurements n end z z2 if mode 1 z z1 end calculate zr zr lambda pi 2 x z x 2 w2 2 w1 2 turn zr into some other useful forms q0 i zr w0 sqrt lambda zr pi decide which side the beam waist is on if w1 w2 z z else z z end
