affine calculation main code affine parameter calculation author maher khoury date march 1 1999 purpose calculates affine motion parameters notes on called subroutines warp m warps frame2 back onto frame1 using the calculated parameters grad m calculates the image spatio temporal gradients parametric m calculates the values of the parameters variables pyriter level of the pyramid step sampling step function k affine image1 image2 initialize values of k to be zero k 1 4 0 hierarchical loop for pyriter 2 1 0 step 2 pyriter double the value of the transitional parameters k k 1 k 2 2 k 3 2 k 4 im1 corrdn image1 step im2 corrdn image2 step for l 1 3 motion compensate frame 2 warped warp im2 k get image gradients ix iy it grad im1 warped find residual k's resid_k parametric ix iy it update the k values k k resid_k end end
