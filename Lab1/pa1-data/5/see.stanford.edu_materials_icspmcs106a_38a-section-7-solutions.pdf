eric roberts page 1 mehran sahami handout 38a cs 106a november 14 2007 solution to section 7 based on a handout by eric roberts file boxdiagram java this program allows the user to create a set of boxes with labels and then drag them around in the window import acm graphics import acm program import java util import java awt event import javax swing public class boxdiagram extends graphicsprogram initializes the program public void init contents new hashmap string gobject createcontroller addactionlisteners addmouselisteners creates the control strip at the bottom of the window private void createcontroller namefield new jtextfield max_name namefield addactionlistener this addbutton new jbutton add removebutton new jbutton remove clearbutton new jbutton clear add new jlabel name south add namefield south add addbutton south add removebutton south add clearbutton south adds a box with the given name at the center of the window private void addbox string name gcompound box new gcompound grect outline new grect box_width box_height glabel label new glabel name box add outline box_width 2 box_height 2 box add label label getwidth 2 label getascent 2 add box getwidth 2 getheight 2 contents put name box removes the box with the given name private void removebox string name gobject obj contents get name if obj null remove obj page 2 2 removes all boxes in the contents table private void removecontents iterator string iterator contents keyset iterator while iterator hasnext removebox iterator next contents clear clear all entries in the hashmap called in response to button actions public void actionperformed actionevent e object source e getsource if source addbutton source namefield addbox namefield gettext else if source removebutton removebox namefield gettext else if source clearbutton removecontents called on mouse press to record the coordinates of the click public void mousepressed mouseevent e last new gpoint e getpoint currentobject getelementat last called on mouse drag to reposition the object public void mousedragged mouseevent e if currentobject null currentobject move e getx last getx e gety last gety last new gpoint e getpoint called on mouse click to move this object to the front public void mouseclicked mouseevent e if currentobject null currentobject sendtofront private constants private static final int max_name 25 private static final double box_width 120 private static final double box_height 50 private instance variables private hashmap string gobject contents private jtextfield namefield private jbutton addbutton private jbutton removebutton private jbutton clearbutton private gobject currentobject private gpoint last
