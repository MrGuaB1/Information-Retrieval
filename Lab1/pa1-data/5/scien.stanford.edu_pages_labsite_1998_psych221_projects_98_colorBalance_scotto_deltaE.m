calculate xyz values of macbeth chart load macbethchart li yi calculated the xyz values for each patch under each illumination and stored them in a 3x24x18 matrix load macbethxyz_filters lab values are calculated from the matrix using xyz2lab the 19th value on the macbeth chart is white for i 1 18 macbethlab_filters i xyz2lab macbethxyz_filters i macbethxyz_filters 19 i end li yi extracted the rgb values from each photograph from each camera and stored them in a 18x3x24 matrix illumationxrgbxcolor load sony load olympus make these 18x3x24 matrices into 3x24x18 matrices for i 1 18 for j 1 3 for k 1 24 sony j k i sonyinversegammacolors i j k olympus j k i olympusinversegammacolors i j k end end end scale the rgb values from 0 1 instead of 0 255 for i 1 3 for j 1 24 for k 1 18 sony i j k sony i j k 255 olumpus i j k olympus i j k 255 end end end convert the rgb values to xyz load local class psych221 tutorials cmatch monitor load xyz rgb2xyz xyz phosphors for i 1 18 for j 1 24 sonyxyz j i rgb2xyz sony j i olympusxyz j i rgb2xyz olympus j i end end the y value for white should be 100 and all other values scaled accordingly for i 1 18 sonyxyz i sonyxyz i 100 sonyxyz 2 19 i olympusxyz i olympusxyz i 100 olympusxyz 2 19 i end convert the xyz values to lab for i 1 18 sonylab i xyz2lab sonyxyz i sonyxyz 19 i olympuslab i xyz2lab sonyxyz i sonyxyz 19 i end calculate the deltae values sonydiff macbethlab_filters sonylab olympusdiff macbethlab_filters olympuslab for i 1 24 for j 1 18 sonydeltaeab i j norm sonydiff i j olympusdeltaeab i j norm olympusdiff i j end end
