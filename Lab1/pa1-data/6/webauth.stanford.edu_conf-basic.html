it services minimal webauth configuration skip navigation stanford university information technology services quick links answers stanford edu apple stanford edu computing stanford edu courses stanford edu datarates stanford edu dell stanford edu departmentphone stanford edu email stanford edu ess stanford edu helpsu stanford edu myitserviceshelp stanford edu orderithelp stanford edu software stanford edu studentphone stanford edu techtraining stanford edu tools stanford edu unixcomputing stanford edu vpn stanford edu web stanford edu windows stanford edu services it services only all campus providers computing stanford edu getting help stanford answers helpsu it help desk training projects about us what we do organization chart jobs contact info internal search search it services webauth overview webauth news obtaining webauth faq download installation configuration user authentication it services webauth obtaining and installing apache for webauth minimal webauth configuration the following apache configuration fragment is a sample minimal configuration for a webauth server similar to the one given in the installation instructions but with comments explaining each step of what's going on in the webauth v3 model each webauth server has to talk to a central authentication server called the webkdc both to send users to the login server and to be able to interpret the tokens that it returns some of the directives below are needed to facilitate that behind the scenes communication the webauth module is built as a dynamic module by default this loads it into apache loadmodule webauth_module modules mod_webauth so location of the server's private aes keys used for communication with the webkdc generated and maintained automatically so it must be writable by the apache server process webauthkeyring conf webauth keyring location of the server's kerberos v5 keytab you need to generate this file as part of the installation webauthkeytab conf webauth keytab location of where the service tokens are kept these tokens are used to authenticate internal communication with the webkdc this file has to be writable by the apache server processes webauthservicetokencache conf webauth service_token_cache where the user is redirected to enter username password this is part of the site configuration and will be provided by the person who sets up the webkdc for your site stanford users should replace webkdc with weblogin stanford edu webauthloginurl https webkdc login url used for behind the scenes communication with the webkdc as above this is part of the site configuration stanford users should replace webkdc with weblogin stanford edu webauthwebkdcurl https webkdc webkdc service the service name to use when communicating with the webkdc the below is just our recommendation the principal name is part of the site configuration webauthwebkdcprincipal service webkdc this file is only needed if your webkdc is using a self signed certificate stanford users should not need to set it for those that are you should copy that certificate the file mentioned in the webkdc's apache sslcertificatefile directive to a local file and point to that file with this directive webauthwebkdcsslcertfile conf webauth webkdc cert anyone who tries to access a webauth protected page via http rather than https should be redirected to https webauthsslredirect on if you are having trouble getting webauth to run you should turn on debug webauthdebug on if you are really have trouble getting webauth to run you should turn on debug and also enable the webauth status url then point your browser at it to check on the status of mod_webauth you should turn off the webauth status url when you are done location webauth status sethandler webauth order allow deny allow from all location example of restricting a location to authenticated users only if uncommented all urls under private would require webauth authentication to access location private authtype webauth require valid user location example of a logout page for a particular application note that even if the user goes to this page they will still have their site wide single sign on cookie so they will not be completely logged out this will only destroy their credentials for that particular application there should also be a web page that this url corresponds to webauth will not generate one internally location logout allowoverride all webauthdologout on location last modified wednesday 11 may 2011 03 46 55 pm it services computing and communication stanford answers helpsu stanford university all rights reserved stanford ca 94305 650 723 2300 terms of use copyright complaints information technology services
