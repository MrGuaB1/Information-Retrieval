design and evaluation of a compiler algorithm for prefetching next introduction design and evaluation of a compiler algorithm for prefetching todd c mowry monica s lam and anoop gupta computer systems laboratory stanford university ca 94305 abstract software controlled data prefetching is a promising technique for improving the performance of the memory subsystem to match today's high performance processors while prefetching is useful in hiding the latency issuing prefetches incurs an instruction overhead and can increase the load on the memory subsystem as a result care must be taken to ensure that such overheads do not exceed the benefits this paper proposes a compiler algorithm to insert prefetch instructions into code that operates on dense matrices our algorithm identifies those references that are likely to be cache misses and issues prefetches only for them we have implemented our algorithm in the suif stanford university intermediate form optimizing compiler by generating fully functional code we have been able to measure not only the improvements in cache miss rates but also the overall performance of a simulated system we show that our algorithm significantly improves the execution speed of our benchmark programs some of the programs improve by as much as a factor of two when compared to an algorithm that indiscriminately prefetches all array accesses our algorithm can eliminate many of the unnecessary prefetches without any significant decrease in the coverage of the cache misses introduction cache performance on scientific code memory hierarchy optimizations an overview a prefetch algorithm locality analysis reuse analysis localized iteration space the prefetch predicate loop splitting scheduling prefetches experimental framework experimental results performance of prefetching algorithm locality analysis loop splitting software pipelining summary sensitivity to compile time parameters dropping prefetches vs stalling interaction with locality optimizer related work software prefetching hardware prefetching future work conclusions acknowledgments references next introduction robert french
