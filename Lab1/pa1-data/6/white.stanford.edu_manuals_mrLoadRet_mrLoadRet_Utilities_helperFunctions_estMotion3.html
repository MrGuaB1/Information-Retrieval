description of estmotion3 home mrloadret utilities helperfunctions estmotion3 m estmotion3 purpose synopsis function m w3d estmotion3 vol1 vol2 rotflag robustflag cb sc description function m w estmotion3 vol1 vol2 rotflag robustflag vol1 and vol2 are volumes 3d arrays m is 4x4 rotation translation transform matrix x mx where x x y z 1 is starting position in homogeneous coords and x x y z 1 is ending position if rotflag is activated 0 then m is a rotation translation otherwise is a general affine transform solves fs t theta ft 0 where theta b p is image velocity at each pixel b is 3x6 3x12 if affine matrix that depends on image positions p is vector of trans rot or affine motion parameters fs is vector of spatial derivatives at each pixel ft is temporal derivative at each pixel mulitplying fs t b gives a 1x6 1x12 if affine vector for each pixel piling these on top of one another gives a an nx6 nx12 if affine matrix where n is the number of pixels solve m p ftvol where ftvol is an nx1 vector of the the temporal derivatives at every pixel if robustflag is activated 0 then uses a robust m estimator instead of conventional least squares cross reference information this function calls computederivatives3 estmotion3 quatr2mat quatr2mat returns the rotation matrix corresponding o the rotation quatrot quatrot returns the quaternion representing the rotation given by robustmest robustmest robust m estimator warpaffine3 this function is called by estmotion3 estmotioniter3 generated on mon 21 sep 2009 23 59 05 by m2html 2005
