it services webauth wa_keyring manual skip navigation stanford university information technology services quick links answers stanford edu apple stanford edu computing stanford edu courses stanford edu datarates stanford edu dell stanford edu departmentphone stanford edu email stanford edu ess stanford edu helpsu stanford edu myitserviceshelp stanford edu orderithelp stanford edu software stanford edu studentphone stanford edu techtraining stanford edu tools stanford edu unixcomputing stanford edu vpn stanford edu web stanford edu windows stanford edu services it services only all campus providers computing stanford edu getting help stanford answers helpsu it help desk training projects about us what we do organization chart jobs contact info internal search search it services webauth overview webauth news obtaining webauth faq webauth module protocol it services webauth wa_keyring webauth wa_keyring manual webauth keyring manipulation tool synopsis wa_keyring hv f file command arg wa_keyring f keyring add valid after wa_keyring f keyring gc oldest valid after to keep wa_keyring f keyring list wa_keyring f keyring remove id description wa_keyring is a command line tool to manage webauth key ring files which contain the private aes keys used by mod_webauth and mod_webkdc it supports the following individual commands add valid after adds a new key to the key ring valid after uses the format nnnn s m h d w to indicate a time relative to the current time the units for the time are specified by appending a single letter that letter can be any of s m h d or w which correspond to seconds minutes hours days and weeks respectively for example 10d is 10 days from the current time and 60d is 60 days before the current time gc oldest valid after to keep garbage collects removes old keys on the key ring any keys with a valid after date older then the specified time will be removed from the key ring the format for oldest valid after to keep is the same as valid after from the add command note that this means that times given to the gc command should generally be negative to remove keys that have expired in the past list lists all the keys in the key ring by default a brief listing is used but a verbose listing can be requested with the v option the following fields are present in a short listing id the index position of the key in the key ring created the date the key was created valid after the date at which the key becomes valid in other words the point at which the webauth server will start using it to encrypt and decrypt new data fingerprint the md5 digest of the key data used to compare keys in two key rings the following fields are present in the long listing key id the index position of the key in the key ring created the date the key was created valid after the date at which the key becomes valid in other words the point at which the webauth server will start using it to encrypt and decrypt new data key type the type of key currently aes is the only supported key type key size length in bytes of the key fingerprint the md5 digest of the key data used to compare keys in two key rings remove id remove the key with id id from the key ring examples add a key to the keyring valid as of the current time wa_keyring f keyring add 0d add a key to the keyring that will be valid three days from now wa_keyring f keyring add 3d remove keys from the key ring that became invalid more than 90 days ago wa_keyring f keyring gc 90d remove the first key in the keyring wa_keyring f keyring remove 0 display a verbose listing of all of the keys in the key ring wa_keyring f keyring v list note that a webauth server will normally manage its keyring file by itself and wa_keyring is normally only used for debugging purposes however if you are setting up a load balanced pool of servers that need to all share the same keys turn off automatic keyring handling by putting the line webauthkeyringautoupdate off to your apache configuration running a script periodically from cron on one server that does something like wa_keyring f keyring gc 90d wa_keyring f keyring add 2d and then copying in a secure manner the new keyring file to all of the other servers author roland schemers schemers stanford edu last modified wednesday 11 may 2011 03 46 57 pm it services computing and communication stanford answers helpsu stanford university all rights reserved stanford ca 94305 650 723 2300 terms of use copyright complaints information technology services
