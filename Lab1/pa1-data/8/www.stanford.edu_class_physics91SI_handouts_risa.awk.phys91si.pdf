untitled page 1 awk page 2 what for command line spreadsheet manipulating data in a text file with columns you could do this with c python idl but with awk you can do simple things simply page 3 awk programs can write programs but once you do that you might as well write a program awk is great for simple command line actions plays nicely with all other shell commands page 4 swap the order of columns awk print $2 $1 file dat file dat page 5 find the maximum value of a column of data awk begin max 0 if $3 max max $3 end print max page 6 find the average of a column of data awk begin ave 0 ave ave+ $1 end print ave nr data dat page 7 remove the second column awk $2 print data dat data2 dat page 8 find the files created last year or larger than 10 mb ls l awk if $8 2010 print du s awk if $1 10000 print page 9 combine two files file1 dat has x y z1 file2 dat has x y z2 you want a file with x y z1 z2 paste file1 dat file2 dat file3 dat awk print $1 $2 $3 $6 file3 dat file4 dat page 10 sort a file on the 3rd column awk print $3 $1 $2 $4 $5 data dat sort n r page 11 print the sum of all fields for every line awk s 0 for i 1 i nf i++ s s+ i print s page 12 count the lines that meet some criteria awk if $3 500 print file dat wc awk begin a 0 if $3 500 a 1 end print a page 13 find all the dark matter halos above a given mass awk if $2 1e14 print halolist dat wc awk if $2 1e14 && $5 0.5 halolist dat page 14 manipulate on more than one column say you have the mass in one column and the radius in another and you want to know the maximum density for all of the objects in a specific region data dat x y z mass radius awk if $1 5 && $2 5 && $3 5 print $4 $5 3
