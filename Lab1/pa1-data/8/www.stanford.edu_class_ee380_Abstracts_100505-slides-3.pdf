facebook 2010 confidential page 1 facebook 2010 confidential page 2 facebook 2010 confidential variant double integer boolean string array object page 3 facebook 2010 confidential php a 10 a string variant v_a page 4 facebook 2010 confidential a b c if is_integer b && is_integer c a int b int c else if is_array b && is_array c a array_merge array b array c else int64 v_a v_b v_c page 5 facebook 2010 confidential php function foo if success return 10 integer return false doh arr a 10 doh a a can be a string actually a a 1 a can become a double ouch page 6 facebook 2010 confidential php function foo x foo 10 foo test void foo variant x page 7 facebook 2010 confidential template typename t void foo t x generate code with generic t tough pros smaller generated code cons no type propagation page 8 facebook 2010 confidential void foo int64 x generate code assuming x is integer void foo variant x generate code assuming x is variant pros type propagation cons variant case is not optimized page 9 facebook 2010 confidential void foo int64 x generate code assuming x is integer void foo variant x if is_integer x foo x toint64 return generate code assuming x is variant pros optimized for integer case cons large code size page 10 facebook 2010 confidential php function foo int a string b class bar public array c bar d page 11 facebook 2010 confidential page 12 facebook 2010 confidential
