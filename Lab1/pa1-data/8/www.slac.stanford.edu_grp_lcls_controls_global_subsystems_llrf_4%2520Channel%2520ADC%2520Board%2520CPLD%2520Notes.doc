4 channel adc board cpld notes 4 channel adc board cpld notes the irq1 pin from the arcturus module is connected to one input of an or gate the other input is connected to the hardware trigger a rising edge output of the or gate sets a flip flop high and starts the state generator if either the hardware trigger or irq1 is held high future inputs can not cause a low to high transition on the output of the or gate and start the state generator the diagram is shown below once the state generator is started it can not be restarted until the flip flop has been cleared the following sequence occurs with the respect to the clock cycle after the trigger on trigger one side on an and gate to set fifo_nren goes high the other side of the and gate is high at this time which causes fifo_nren to go high and disable reads this must be done before a master reset on the fifo 2 clocks fifo_nmrs master reset goes low reseting the fifo 4 clocks fifo_nmrs goes high fifo reset complete 8 clocks fifo_nren goes low enabling reads from the fifo fifo_nwen goes low enabling data to be clocked into the fifo irq2 goes low to generate an interrupt a 20bit counter clear goes low to enable counting bit 1 of the counter 4 generates a clock divide by 4 test signal which is gated by use of two 8 bit comparators on bits 2 to 9 bit 20 is used to disable the fifo_nwen set irq2 high and clear the trigger flip flop so after 524288 8 clocks the trigger is enabled at 102mhz this is 5.14 ms
