savetriggers py cni wiki cni wiki savetriggers py from cni wiki jump to navigation search usr bin env python import serial import sys signal time from datetime import datetime be sure to set this to the correct device under linux it is something like dev ttyacm0 on osx it will be dev ttyusbnnnn where nnnn is some cryptic number on windows it will be a com port eg com4 device dev ttyacm0 running true def handler signum frame global running running false set the signal handler to allow clean exit with a term signal signal signal signal sigterm handler if __name__ __main__ filename sys argv 1 timeref datetime now with open filename a as f f write reference time s n str timeref ser serial serial device 115200 timeout 1 time sleep 0.1 send a trigger pulse to start scanning ser write t n display the firmware greeting out ser readlines for l in out print l send the command to enable input pulses ser write p n while running n ser inwaiting if n 0 s ser read n if s 0 p ts datetime now timeref totalseconds ts microseconds ts seconds ts days 24 3600 10 6 float 10 6 print the time stamp as an offset from the reference time in milliseconds f write 0.9 f n totalseconds ser close exit 0 retrieved from http cni stanford edu wiki savetriggers py views page discussion view source history personal tools log in with webauth search this wiki navigation main page operations irb info mr hardware mr protocols stimulus presentation mr simulator eeg data access data processing troubleshooting recent changes help toolbox what links here related changes special pages printable version permanent link powered by mediawiki this page was last modified on 7 june 2011 at 10 04 this page has been accessed 218 times privacy policy about cni wiki disclaimers
