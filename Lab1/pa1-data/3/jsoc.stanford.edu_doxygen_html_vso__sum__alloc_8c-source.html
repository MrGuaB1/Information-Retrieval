jsoc_documentation base drms apps vso_sum_alloc c source file main page manpage sections data structures files examples related pages search for file list globals base drms apps vso_sum_alloc c 00001 include drms h 00002 include printk h 00003 ifdef __linux__ 00004 include sched h 00005 endif 00006 00007 moduleargs_t module_args 00008 00009 arg_int sunum null su number 00010 arg_int size null size in bytes of the su 00011 arg_end 00012 00013 00014 moduleargs_t gmodargs module_args 00015 cmdparams_t cmdparams 00016 00017 int main int argc char argv 00018 00019 00020 long long sunum 0 20451940 00021 uint64_t size 0 34554432 00022 char sudir char null 00023 sum_t sum sum_t null 00024 int status 0 00025 00026 if status cmdparams_parse &cmdparams argc argv cmdparams_success 00027 00028 fprintf stderr error command line parsing failed aborting d n status 00029 return 1 00030 00031 00032 sunum cmdparams_get_int64 &cmdparams sunum null 00033 size cmdparams_get_int64 &cmdparams size null 00034 00035 if sum sum_open null null printkerr null 00036 00037 fprintf stderr error drms_open failed to connect to sums n 00038 fflush stdout 00039 return 2 00040 00041 00042 sum reqcnt 1 00043 sum bytes size 00044 00045 make rpc call to the sum server 00046 if status sum_alloc2 sum sunum printf 00047 00048 fprintf stderr error sum_alloc2 rpc call failed with 00049 error code d n status 00050 return 3 00051 00052 00053 sudir strdup sum wd 0 00054 fprintf stdout sunum llu size llu sudir s n unsigned long long sunum unsigned long long size sudir 00055 00056 00057 sum_close sum printf 00058 00059 if sum wd 0 00060 free sum wd 0 00061 00062 00063 if sudir 00064 free sudir 00065 00066 00067 00068 return 0 00069 00070 generated on mon jan 3 10 42 51 2011 for jsoc_documentation by doxygen 1.5 7.1
