one way anova source dataprep r key var is math in data1 data2 contains level2 covariates some soaking and poking summary data1 math table data1 school length unique data1 school classical one way anova classical aov math as factor school data data1 intra class correlation library psychometric icc1 lme math school data1 library multilevel icc1 classical library survey d svydesign ids school data data1 clustered svymean math design d deff replace lme4 linear mixed model library lme4 l1 lmer math 1 school data data1 l1 omega as numeric summary l1 remat 1 std dev l1 sigma as numeric summary l1 remat 2 std dev l1 icc l1 omega 2 l1 omega 2 l1 sigma 2 mcmc via jags library rjags forjags list forjags math data1 math forjags j match data1 school indexes which school we re in unique data1 school forjags n length data1 math number of observations forjags j max forjags j number of schools initialize the gibbs sampler inits list mu0 mean forjags math alpha tapply forjags math forjags j mean school specific means mu y forjags math compile jags foo jags model file oneway2 bug inits inits data forjags get 4k iterations out coda samples foo 4000 variable names c alpha mu0 sigma eps sigma mu raftery diagnostic raftery diag out c 1 160 see summaries for all of the output summary out
