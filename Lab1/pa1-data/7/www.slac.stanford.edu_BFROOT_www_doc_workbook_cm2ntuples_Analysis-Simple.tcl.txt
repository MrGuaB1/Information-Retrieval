analysis tcl main tcl file for b+ jpsi k+ jpsi mu+ mu workbook tutorial general setup needed in all jobs sourcefoundfile errlogger errlog tcl sourcefoundfile framescripts fwkcfgvar tcl sourcefoundfile framescripts talkto tcl fwkcfgvars needed to control this job set prodtclonly true allowed values of betaminireadpersistence are kan bdb fwkcfgvar betaminireadpersistence kan allowed values of levelofdetail are micro cache extend or refit fwkcfgvar levelofdetail cache select mc or data fwkcfgvar mctruth true filter on tag bits only if requested fwkcfgvar filterontag false print frequency fwkcfgvar printfreq 1000 ntuple is root or hbook make sure file name matches type fwkcfgvar betaminituple root fwkcfgvar histfilename tutorial root number of events defaults to 0 run on full tcl file fwkcfgvar nevents 0 general physics sequences set to trace to get info on a configuration problem errlogginglevel warning btaminiphysics is the basic physics sequences sourcefoundfile betaminiuser btaminiphysics tcl use simplecomposition to make the candidates of interest create analysis sequence and append it to the path all the composition modules get added to this sequence sequence create analysissequence path append everything analysissequence jpsi lists basic jpsi to mu mu list no mass constraint for ntuple mod clone smpmakerdefiner myjpsitomumu seq append analysissequence myjpsitomumu talkto myjpsitomumu decaymode set j psi mu+ mu daughterlistnames set munnveryloose daughterlistnames set munnveryloose fittingalgorithm set cascade fitconstraints set geo prefitselectors set mass 2.8 3.4 postfitselectors set mass 2.9 3.3 now add the mass constraint mod clone smprefitterdefiner myjpsitomumumass seq append analysissequence myjpsitomumumass talkto myjpsitomumumass unrefinedlistname set myjpsitomumu fittingalgorithm set cascade fitconstraints set geo fitconstraints set mass b+ b+ jpsi k+ mod clone smpmakerdefiner bchtojpsikch seq append analysissequence bchtojpsikch talkto bchtojpsikch decaymode set b+ j psi k+ daughterlistnames set myjpsitomumumass daughterlistnames set klhveryloose fittingalgorithm set treefitter fitconstraints set geo prefitselectors set deltae 0.20 0.20 prefitselectors set mes 5.19 5.30 postfitselectors set probchisq 0.001 postfitselectors set deltae 0.12 0.12 postfitselectors set mes 5.20 5.30 postfitselectors set cmscostheta postfitselectors set mmiss createusrdata set true use btutuplemaker to write out ntuples for simplecomposition job path append everything btutuplemaker talkto btutuplemaker event information to dump eventblockcontents set eventid cmp4 beamspot eventtagsint set ntracks eventtagsfloat set r2all xprimaryvtx yprimaryvtx zprimaryvtx writeeveryevent set false mc truth info fillmc set true mcblockcontents set mass cmmomentum momentum vertex particle blocks to store listtodump set bchtojpsikch ntpblockconfigs set b b 2 50 ntpblockcontents set b mcidx mass momentum cmmomentum vertex vtxchi2 usrdata bchtojpsikch ntpblockconfigs set j psi jpsi 2 50 ntpblockcontents set jpsi mcidx mass momentum vertex vtxchi2 ntpauxlistcontents set jpsi myjpsitomumu unc mass ntpblockconfigs set k+ k 0 50 ntpblockcontents set k mcidx momentum pidweight klhveryloose klhloose klhtight ntpblockconfigs set mu+ mu 0 50 ntpblockcontents set mu mcidx momentum pidweight munnveryloose munnloose want to save all calorneutrals in the gamma block ntpblockconfigs set gamma gamma 0 60 ntpblockcontents set gamma mcidx momentum gamextracontents set emc fillallcandsinlist set gamma calorneutral trk block save all of them as well fillallcandsinlist set trk chargedtracks remember to change this back to k pi mu e ntpblocktotrk set k mu trkextracontents set bitmap pselectorsmap kselectorsmap piselectorsmap muselectorsmap eselectorsmap tracksmap trkextracontents set hots trkextracontents set eff ave ntpblockcontents set trk doca docaxy turn on pid weights and neutral corrections pidcfg_mode weight talkto emcneutcorrloader correctionon set true endcapshift set true use filterontag to disable tag filtering if desired module clone tagfilterbyname tagjpsill module talk tagjpsill orlist set jpsieloose orlist set jpsimuloose assertifmissing set true exit if filterontag true sequence append betaminireadsequence a kaneventupdatetag tagjpsill run time options mod talk evtcounter printfreq set printfreq exit path list if nevents 0 ev beg nev nevents exit
