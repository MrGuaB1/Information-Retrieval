ssh trick stanford linear accelerator center ssh and kinit tricks unix at slac security updated 09 aug 2007 contents rsync cvs x11 forwarding http proxy this page is to document some of the benefits of switching to the new ssh server that uses gssapi authentication in particular it makes some tasks from remote machines much simpler and easier if you have a kerberos 5 enabled version of ssh and kinit you can do password less login to slac from anywhere and still have an afs token ssh can pass other connections such as x11 over the encrypted channel making secure x connections possible here are some ways to use those two features to your advantage rsync if you have a slac kerberos ticket on your remote machine you can easily rsync file directories to or from afs generally rsync is setup to ssh by default on os x and linux but if not you can easily configure this by setting the environment variable in bash rsync_rsh ssh export rsync_rsh or in csh tcsh setenv rsync_rsh ssh here's an example note that you only need to kinit once per day your kerberos ticket remains valid for 24 hrs kinit slac_id slac stanford edu to afs rsync avz my src code slac_id machine slac stanford edu my src code from afs rsync avz slac_id machine slac stanford edu my src code my src code see the rsync man page for more uses cvs you can also easily use cvs remotely with this verison of ssh it's controlled by a very similar enviromental variable cvs_rsh in bash cvs_rsh ssh export cvs_rsh or in csh tcsh setenv cvs_rsh ssh here's an example note that you only need to kinit once per day your kerberos ticket remains valid for 24 hrs kinit slac_id slac stanford edu cvs d ext slac_id machine slac stanford edu afs path to cvsroot checkout project the nice thing about this is that you only need to specify the remote syntax on checkout if you have a kerberos ticket using cvs remotely works just like using cvs on a slac machine see the cvs manual for more uses x11 forwarding this isn t a new feature really but it's worthing noting some of the tricks in mac os x the open source openssh client is included with the basic os install it also includes the kinit command used above the one caveat is that if you wish to use x11 forwarding you must ssh from within an xterm rather than the standard terminal app window http proxy ssh can forward other tcp services over the encrypted connection examples of such services would be ftp pop imap and x windows this keeps the passwords that these services forward over the network from being visible to hackers who may be watching the network traffic these services have no encryption of their own built in and need the protection of an external protocol this forwarding is often referred to as tunneling because the tcp traffic is sent through an encrypted tunnel that shields it from view one of the most useful tricks is to use a proxy pac file to setup your remote web browser to use ssh to tunnel to web pages that are only visible on slac's internal network here's a sample proxy pac file that does that through an ssh socks tunnel function findproxyforurl url host variable strings to return proxy_yes socks 127.0 0.1 8080 proxy_no direct if shexpmatch url https webscs02 slac stanford edu return proxy_yes if shexpmatch url http nagios slac stanford edu return proxy_yes if shexpmatch url slaconly return proxy_yes return proxy_no both firefox and safari support this you will need to configure your browser to use this file you will also need to have an active ssh connection to a slac machine like this ssh d 8080 userid machine slac stanford edu owner booker c bense
