babar workbook slac pep ii babar slac ral babar logo hepic e s & h databases pdg hep preprints organization detector computing physics documentation personnel glossary sitemap search hypernews workbook home introduction account setup quicktour packages modules unwrap page event information tcl commands editing compile and link run the job debugging check this page with the w3c validator more checks parameters tcl files find data batch analysis root tutorial myminianalysis tcl for example 6 id myminianalysis tcl v 1.29 2004 11 19 22 42 08 fnc exp sample myminianalysis tcl file always source the error logger early in your main tcl script sourcefoundfile errlogger errlog tcl sourcefoundfile framescripts fwkcfgvar tcl sourcefoundfile framescripts talkto tcl disable the use of envvars set prodtclonly true set the error logging level to warning if you encounter a configuration error you can get more information using trace errlogginglevel warning allowed values of betaminireadpersistence are currently kan bdb fwkcfgvar betaminireadpersistence kan allowed non expert values of levelofdetail are micro cache extend or refit fwkcfgvar levelofdetail cache allowed values of configpatch are run1 run2 or mc this must be set consistent with your input data type or you will get inconsistent or incorrect results fwkcfgvar configpatch mc set the number of events to run if this isn t set all events in the input collections will be processed fwkcfgvar nevent choose the flavor of ntuple to write hbook or root and the file name fwkcfgvar betaminituple root fwkcfgvar histfilename myminianalysis root you can enter input collections two ways either append them to a list or explicitly enter them in the input module do one or the other but not both if inputlist is set before executing btamini tcl that will automatically add the collections to the appropriate input module otherwise make sure you talk to the right one lappend inputlist collection1 collection2 or the following choose the correct one based on persistence talkto bdbeventinput talkto kaneventinput input add collection1 input add collection2 sourcefoundfile betaminiuser myinputcollection tcl create everything path and add core sequences to it btaminiphysics is the same as btamini just appending a few standard list generating modules for reading data with stored composites you may have a conflict running btaminiphyscs tcl you can also run most of the physprodsequence complete with its 3 gamma conversion finders etc consider disabling the portion of this sequence that you do not need to save yourself some time the betalumisequence and tagprod sequences are left off as they otherwise cause problems sourcefoundfile betaminiuser btamini tcl sourcefoundfile betaminiuser btaminiphysics tcl sourcefoundfile betaminiuser btaminiphysprodsequence tcl append qa sequence if requested disable module otherwise to avoid empty histos fwkcfgvar myminiqa if info exists myminiqa sourcefoundfile betaminiqa betaminiqasequence tcl path append everything betaminiqasequence talkto qaminibtacandidates startprint set 0 stopprint set 3 printfreq set 1 path append everything taginspector sourcefoundfile skimmini listoftagbits tcl else module disable qaminibtacandidates add analysis module path append everything myminianalysis path append everything parmexample if your job has a tag level filter here is how you should run it so as to avoid wasting time reading the mini when the tag filter fails here's a simple example that restricts to just multi hadron events on kan input module clone tagfilterbyname tagbgfmultihadron module talk tagbgfmultihadron andlist set bgfmultihadron assertifmissing set true exit sequence append betaminireadsequence a kaneventupdatetag tagbgfmultihadron set parmeters for parmexample sourcefoundfile betaminiuser parmexample tcl turn off some specialty items module disable mydstaranalysis module disable myk0analysis module disable qexample path list if info exists nevent ev begin nev nevent else ev begin errmsg trace completed ok exit
