man page lookup dup2 dup 2 openbsd programmer's manual dup 2 name dup dup2 duplicate an existing file descriptor synopsis include unistd h int dup int oldd int dup2 int oldd int newd description dup duplicates an existing object descriptor and returns its value to the calling process newd dup oldd the argument oldd is a small non negative integer index in the per process descriptor table the val ue must be less than the size of the table which is returned by getdtablesize 3 the new descriptor returned by the call is the lowest numbered descriptor currently not in use by the process the object referenced by the descriptor does not distinguish between oldd and newd in any way thus if newd and oldd are duplicate references to an open file read 2 write 2 and lseek 2 calls all move a single pointer into the file and append mode non blocking i o and asynchronous i o options are shared between the references if a separate pointer in to the file is desired a different object reference to the file must be obtained by issuing an additional open 2 call the close on exec flag on the new file descriptor is unset in dup2 the value of the new descriptor newd is specified if this descriptor is already in use it is first deallocated as if a close 2 call had been done first when newd equals oldd dup2 just returns without affecting the close on exec flag return values the value 1 is returned if an error occurs in either call the external variable errno indicates the cause of the error errors dup and dup2 fail if ebadf oldd or newd is not a valid active descriptor emfile too many descriptors are active see also accept 2 close 2 fcntl 2 open 2 pipe 2 socket 2 socketpair 2 getdtablesize 3 standards dup and dup2 are expected to conform to ieee std 1003.1 1988 posix openbsd 3.5 june 4 1993 1
