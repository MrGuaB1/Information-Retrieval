babar workbook slac pep ii babar slac ral babar logo hepic e s & h databases pdg hep preprints organization detector computing physics documentation personnel glossary sitemap search hypernews workbook home introduction account setup quicktour packages modules unwrap page event information tcl commands editing compile and link run the job debugging check this page with the w3c validator more checks parameters tcl files find data batch analysis root tutorial a quick guide to tcl for users of babar code babar's tcl scripts mostly use the special babar tcl commands so you do not need to know much ordinary tcl to be able to read and understand babar tcl scripts the following super quick intro to tcl should provide you with all the background you need tcl basics tcl scripts are made up of commands separated by newlines or semicolons the basic syntax for a tcl command is command arg1 arg2 arg3 the first word of a tcl statement must be either one of the standard tcl commands or a procedure proc which is a user defined command the special babar tcl commands are in fact just procs comments begin with unlike many programming languages tcl comments cannot be placed on the same line as a command this comment is ok set x 10 this comment is not ok variables to assign a value to a variable use the set command set elephant babar set pi 3.142 you don t need to declare variables in tcl a variable is created automatically the first time it is set tcl variables don t have types any variable can hold any value here the variable elephant is assigned the string value babar while the variable pi is assigned the number value 3.142 to use the value of a variable in a command you have to put a dollar sign in front of it set a 5 set b 8 set c expr a b the dollar sign tells tcl to use the value of the variable this is called variable substitution the expr command evaluates the expression and the square brackets cause command substitution so the the value of c is set to 13 if else the syntax for the if command is similar to other programming languages if cond1 action1 if cond1 action1 elseif action2 body2 if cond1 action1 elseif action2 body2 else action3 in babar code the if command is often used to see if a variable exists if info exists varname action1 action2 action3 the curly braces cause grouping that is as in c++ they make the if command apply to everything between the curly braces all three actions not just the first line action1 a note about the set command notice that the usual tcl syntax for setting variables is inverted when you talk to a module in ordinary tcl set bubble 20 but in a module talk session mod talk pillowmodule pillow set 100 exit you don t really need to know why this is as long as you remember it however if you re interested it's because in the ordinary tcl example the command is set and the argument is bubble but in the module talk session the command is pillow set this is a proc that has been defined thanks to the fact that pillow was appended to the module's command list again if this makes no sense to you don t worry you don t need to understand it back to tcl files section
