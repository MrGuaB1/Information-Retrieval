ssh_shared html stanford linear accelerator center the new secure shell ssh at slac unix at slac security updated 12 september 2007 contents ssh and shared accounts using ssh automating entries in the k5login problems and workarounds ssh and shared accounts previously slac used a locally customized version of ssh that supported forwarding afs tokens during login unfortunately the latest versions of openssh make maintaining these set of patches and keeping our software current very difficult we are switching to a new version of ssh that supports kerberos tgt forwarding and using this forwarded ticket to obtain an afs token at login this will make many things much easier and simpler in the future but leaves us with a difficult transition period as the behavior of one of the most commonly used tools changes accessing shared accounts the new version will require you to use ssh version 2 to take advantage of the tgt forwarding and automatically get an afs token when logging into a shared access or role account version 1 rsa key based connections will continue to be supported until sometime in december 2007 but only a gssapi or kerberos login will get you an automatic afs token on login due to doe computer security requirements ssh version 1 will have to be phased out by 2008 using ssh to access a shared account once the k5login file has been created for the shared account users simply use these two commands to access the shared account kinit userid slac stanford edu ssh sharedid machine slac stanford edu automatic update of k5login files for shared accounts shared accounts will need to be handled differently rather than using the ssh authorized_keys file to control access you will want to use the k5login file to list the authorized users of the account the ssh authorized_keys method will still continue to work but you will have to kinit after login to obtain an afs token maintaining the k5login by hand will be very awkward as the file must be owned by the shared account and have specific permissions 0644 in order to work properly sccs has created an automated process to allow groups to manage the k5login file effectively for each shared account you will need to identify a pts group that contains all the users that are allowed to log in to the shared account you will then need to contact unix admin with both the shared account name and pts group this will be added to the config file and then an automated process will track the entries in the pts group and update the k5login file at regular intervals all known current shared account owners will be contacted by sccs to provide this information here is typical example in the past sccs standard practice has been to set up two pts groups for every shared account if the account was foobar the corresponding pts groups would be foobar owner foobar people that can add delete users from foobar foobar foobar foobar people that can ssh into the account in the new system you would no longer need to maintain ssh keys for the people in foobar foobar but simply use the pts command to add delete them from the group problems and workarounds if you encounter any problems please report them to unix admin slac stanford edu reference man pages for the ssh commands there are detailed manual pages for each of the primary ssh commands use the man command on the unix system or click on the link below to view them openssh manual pages ssh information elsewhere ssh resources openssh home page openssh faq faq getting started information owner booker c bense
