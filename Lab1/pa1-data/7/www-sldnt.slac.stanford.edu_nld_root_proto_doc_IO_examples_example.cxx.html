example of tmap and tclonesarray io example of tmap and tclonesarray io test of root i o with a simple map and connected array 6 18 98 rxd structure is tmap containing integer key with a separate class as value the value object contains a float and a pointer to an array of other objects include stdlib h include troot h include tfile h include ttree h include tbranch h include tmap h include tclonesarray h include tobject h include keyval h main troot simple simple example of creation of a tree int_t comp 1 by default file is compressed int_t split 0 by default split event in sub branches int_t write 1 by default the tree is filled int_t testkey 6 10 1 0 int_t testtype 1 7 9 23 float_t teste 22 1 0.3 4 int_t nval 4 tfile hfile tmap testmap 0 ttree tree fill event header and tracks with some random numbers int_t nb 0 int_t ev int_t bufsize this file is now becoming the current directory hfile new tfile event root recreate ttree benchmark root file hfile setcompressionlevel comp create a root tree and one superbranch tree new ttree t an example of a root tree tree setautosave 1000000000 autosave when 1 gbyte written bufsize 256000 create the map to be written out and an iterator for it testmap new tmap 17 0 tmapiter next testmap tclonesarray testclone new tclonesarray mcpart tclonesarray &mcpart testclone tree branch testmap tmap &testmap bufsize split tree branch testclone tclonesarray &testclone bufsize split for int_t i 0 i nval i new mcpart i mcpart testtype i testmap add new akey testkey i new aval teste i mcpart mcpart i printf particle type i n mcpart mcpart i gettype if write nb tree fill fill the tree printf tree filled with i bytes n nb hfile write tree print hfile close return 0 root page class index top of the page this page has been automatically generated if you have any comments or suggestions about the page layout send a mail to root support or contact the developers with any questions or problems regarding root
