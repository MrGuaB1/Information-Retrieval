best practices using batch computing at slac search slac slac home computing home unix at slac high performance computing at slac best practices using batch writing output from batch jobs there are a number of different options available for writing output from batch local space provides the best performance when writing your batch output by local space we mean tmp or scratch on the batch worker not all batch workers have a scratch you can check an individual batch worker with the command bhosts l look for lines like the following under current load used for scheduling lammpi_load scratch total 0.0 38.0 reserved 0.0 the entry 38 under scratch tells you how much scratch space is currently available in gb nfs space can be used for writing output from batch jobs but has the disadvantage of having to go across the network which will be slower than writing locally another problem when writing to nfs is the severe impact that results when the nfs filesystem becomes or is close to becoming full an nfs server can become unresponsive if there numerous batch jobs trying to write to an already full filesystem the server has to spend its time checking on the filesystem and then denying each request if the system is full since nfs servers often have a number of filesystems that they export users of filesystems that are not full will also suffer since it is the server that is the victim not just the full filesystem afs space is usually not a good place to write from batch afs has a difficult time of it when multiple machines are all reading and writing to the same file at the same time the same goes for changing the status of entries in a directory everytime the file directory is changed each system that is trying to read it needs to recontact the server for the update this puts quite a load on the afs server and can cause the server to slow down having a noticeable impact on all users interactive sessions will appear to hang and in severe circumstances users will see lost contact with fileserver xxxx messages if it is desireable to store results in afs it is best to write locally to tmp or scratch space and then copy the results into afs once at the end of the job owner renata dart
