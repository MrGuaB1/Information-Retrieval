php fhimage copyright c 2003 flash here com support flash here com function resizejpg imagefile w check path to prevent illegal access to other files if substr imagefile 0 1 strstr imagefile echo illegal access exit seems gif not supported by gd now ext substr imagefile 3 if strtolower ext gif if src_img imagecreatefromgif imagefile echo error opening image file exit else if strtolower ext jpg if src_img imagecreatefromjpeg imagefile echo error opening image file exit else echo error file type not supported exit hw getimagesize imagefile new_w w new_h hw 1 hw 0 w truecolor supported only in gd 2.0 or later dst_img imagecreatetruecolor new_w new_h if dst_img dst_img imagecreate new_w new_h imagecopyresized dst_img src_img 0 0 0 0 new_w new_h imagesx src_img imagesy src_img imagejpeg dst_img imagedestroy src_img imagedestroy dst_img header content type image jpeg in case register global is off foreach http_get_vars as key val key val global key if w w 100 resizejpg image w
