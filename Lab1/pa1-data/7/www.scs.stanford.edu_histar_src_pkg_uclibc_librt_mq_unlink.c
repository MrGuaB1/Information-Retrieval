mq_unlink c remove a message queue include errno h include sys syscall h include mqueue h ifdef __nr_mq_unlink define __nr___syscall_mq_unlink __nr_mq_unlink static inline _syscall1 int __syscall_mq_unlink const char name remove message queue int mq_unlink const char name int ret if name 0 __set_errno einval return 1 ret __syscall_mq_unlink name 1 while unlink can return either eperm or eacces mq_unlink should return just eacces if ret 0 ret errno if ret eperm ret eacces __set_errno ret ret 1 return ret endif
