openmp tutorial computing at slac search slac slac home computing home unix at slac high performance computing at slac parallel computing at slac openmp tutorial openmp's hello world name this little hello world program hello c include stdio h include omp h int main int argc char argv int iam 0 np 1 pragma omp parallel default shared private iam np if defined _openmp np omp_get_num_threads iam omp_get_thread_num endif printf hello from thread d out of d n iam np compiling and linking openmp programs once you have your openmp example program you can compile and link it with linux afs slac stanford edu package intel_tools compiler9 0 sys cc bin icc openmp hello c o hello solaris afs slac package sunworkshop 10 sunwspro bin cc xopenmp noopt hello c o hello running openmp programs the openmp runtime environment needs an environment variable to tell it how many threads you want to use for your program in bash syntax this looks like this export omp_num_threads 4 now you can start your program and it will execute with 4 parallel threads alfw noric hello hello from thread 0 out of 4 hello from thread 1 out of 4 hello from thread 2 out of 4 hello from thread 3 out of 4 note that if the computer you are executing your openmpi program on has fewer cpus or cores than the number of threads you have specified in omp_num_threads the openmp runtime environment will still spawn as many threads but the operating system will sequentialize them references www openmp org openmp tutorial from llnl getting started with openmp c version sun microsystem's studio 11 openmp api user's guide alf wachsmann last modified mar 01 2006
